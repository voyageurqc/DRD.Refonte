// ============================================================================
// Projet                         DRD.Application
// Nom du fichier                 EntityMetadataMapper.cs
// Type                           Classe utilitaire (Mapper)
// Classe                         Class
// Emplacement                    Popup/Mappers
// Entité(s) concernées           EntityMetadataDto, IAuditableEntity
// Créé le                        2025-12-12
//
// Description
//     Mapper responsable de convertir une entité auditable Domain en DTO
//     EntityMetadataDto pour affichage dans les vues DRD (Details, Edit,
//     modale _SystemMetadataPartial).
//
// Fonctionnalité
//     - Extrait et mappe les dates et identifiants d’audit.
//     - Mappe l’état actif et le niveau de sécurité DRD.
//     - Prépare l’enrichissement futur des noms complets via services.
//
// Modifications
//     2025-12-12    Création DRD v10 complète : header, XML, mappage intégral.
// ============================================================================

@using System.Globalization
@using DRD.Application.Popup.Models
@using static DRD.Resources.Common.Common
@using static DRD.Resources.Buttons.Buttons
@using static DRD.Resources.Popups.Popups
@model DRD.Application.Popup.Models.EntityMetadataDto

<div class="modal fade"
     id="systemMetadataModal"
     tabindex="-1"
     aria-labelledby="systemMetadataLabel"
     aria-hidden="true">

    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow rounded-3">

            <!-- HEADER -->
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="systemMetadataLabel">
                    <i class="fas fa-database"></i> @SystemInfoTitle      <!-- FIX -->
                </h5>

                <button type="button"
                        class="btn-close btn-close-white"
                        data-bs-dismiss="modal"
                        aria-label="@Button_Close">
                </button>
            </div>

            <!-- BODY -->
            <div class="modal-body">

                <ul class="list-group list-group-flush">

                    <li class="list-group-item">
                        <i class="fa-solid fa-calendar-plus"></i>
                        @CreatedOn
                        <strong>@Model.CreationDate.ToString(CultureInfo.CurrentCulture)</strong>
                    </li>

                    <li class="list-group-item">
                        <i class="fa-solid fa-user"></i>
                        @CreatedBy
                        <strong>@(Model.CreatedByName ?? Model.CreatedBy ?? "N/A")</strong>
                    </li>

                    <li class="list-group-item">
                        <i class="fa-solid fa-calendar-pen"></i>
                        @ModifiedOn
                        <strong>@Model.ModificationDate.ToString(CultureInfo.CurrentCulture)</strong>
                    </li>

                    <li class="list-group-item">
                        <i class="fa-solid fa-user-pen"></i>
                        @ModifiedBy
                        <strong>@(Model.UpdatedByName ?? Model.UpdatedBy ?? "N/A")</strong>
                    </li>

                </ul>

            </div>
        </div>
    </div>
</div>
