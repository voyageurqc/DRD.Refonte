@* ============================================================================
Projet                        	DRD.Web
Nom du fichier                		_NavLayout.cshtml
Type de fichier                		Razor View (Partielle)
Classe                        		Navigation
Emplacement                   		Views/Shared
Entités concernées            		SideBar (ressources)
Créé le                       		2025-12-04

Description
    Menu latéral DRD v10 avec sections collapsibles. Utilise SideBar.resx pour
    l’affichage bilingue FR-CA / EN-CA. Le comportement d’ouverture/fermeture
    est géré par sidebar.js.

Fonctionnalité
    - 6 sections principales : Home, Security, Clients, Pilotage, Stats, Reports
    - Navigation structurée avec Bootstrap collapse
    - Prise en charge du bilinguisme via les resources
    - Indicateur visuel possible avec data-item / data-section
    - Ajout d'une section Développement fixée en bas de la sidebar (DEV uniquement)

Modifications
    2025-12-09		Refonte de l'en-tête selon DRD v10 Option B (sans emoji, TAB alignés)
    2025-12-06		Section Développement fixée bas-sidebar (flex, sans absolute)
    2025-12-06		Ajout version marketing + compilation + build
    2025-12-05		Nettoyage complet
    2025-12-04		Version initiale DRD v10
=============================================================================== *@

@using static DRD.Resources.SideBar
@inject IWebHostEnvironment Env
@using System.Reflection

@{
    // Assembly DRD.Web
    var assembly = Assembly.GetExecutingAssembly();
    var asm = assembly.GetName();

    // Version compilation (AssemblyVersion)
    string compilationVersion =
        $"{asm.Version?.Major}.{asm.Version?.Minor}.{asm.Version?.Build}.{asm.Version?.Revision}";

    // Version marketing DRD
    string marketingVersion =
        $"{asm.Version?.Major}.{asm.Version?.Minor}.{asm.Version?.Build}";

    // Date du fichier .dll
    var buildDate = System.IO.File.GetLastWriteTime(assembly.Location);
    string buildString = buildDate.ToString("yyyy-MM-dd HH:mm");
}

<aside id="app-sidebar" style="display:flex; flex-direction:column; height:100%;">

    <!-- NAVIGATION PRINCIPALE -->
    <nav class="nav flex-column" style="flex:1 1 auto;">

        @* REGION: Home *@
        <a class="nav-link sidebar-item"
           href="@Url.Action("Index", "Home")"
           data-item="Home">
            <i class="fa-solid fa-house me-2"></i>
            @Home
        </a>

        @* REGION: Security *@
        <a class="nav-link sidebar-section"
           data-bs-toggle="collapse"
           href="#secSecurity"
           aria-expanded="false"
           aria-controls="secSecurity"
           data-section="Security">
            <i class="fa-solid fa-shield-halved me-2"></i>
            @Security_Section
        </a>

        <div class="collapse submenu" id="secSecurity">
            <a class="nav-link ms-4 sidebar-item" href="@Url.Action("Index", "Users")">@Security_Users</a>
            <a class="nav-link ms-4 sidebar-item" href="@Url.Action("Index", "Roles")">@Security_Roles</a>
            <a class="nav-link ms-4 sidebar-item" href="@Url.Action("Register", "Account")">@Security_Register</a>
        </div>

        @* REGION: Clients *@
        <a class="nav-link sidebar-section"
           data-bs-toggle="collapse"
           href="#secClients">
            <i class="fa-solid fa-users me-2"></i>
            @Clients_Section
        </a>

        <div class="collapse submenu" id="secClients">
            <a class="nav-link ms-4 sidebar-item" href="@Url.Action("Index", "Client")">@Clients_Client</a>
            <a class="nav-link ms-4 sidebar-item" href="@Url.Action("Index", "ClientDetails")">@Clients_ClientDetails</a>
            <a class="nav-link ms-4 sidebar-item" href="@Url.Action("Index", "Individual")">@Clients_Individual</a>
        </div>

        @* REGION: Pilotage *@
        <a class="nav-link sidebar-section"
           data-bs-toggle="collapse"
           href="#secPilotage">
            <i class="fa-solid fa-gears me-2"></i>
            @Pilotage_Section
        </a>

        <div class="collapse submenu" id="secPilotage">
            <a class="nav-link ms-4 sidebar-item" href="@Url.Action("Index", "WebMessage")">@Pilotage_WebMessage</a>
            <a class="nav-link ms-4 sidebar-item" href="@Url.Action("Index", "CdSet")">@Pilotage_CdSet</a>
            <a class="nav-link ms-4 sidebar-item" href="@Url.Action("Index", "FinancialInstitution")">@Pilotage_FinancialInstitution</a>
        </div>

        @* REGION: Stats *@
        <a class="nav-link sidebar-section"
           data-bs-toggle="collapse"
           href="#secStats">
            <i class="fa-solid fa-chart-simple me-2"></i>
            @Stats_Section
        </a>

        <div class="collapse submenu" id="secStats">
            <a class="nav-link ms-4 sidebar-item" href="@Url.Action("Index", "DatabaseTable")">@Stats_DatabaseTable</a>
        </div>

        @* REGION: Reports *@
        <a class="nav-link sidebar-section"
           data-bs-toggle="collapse"
           href="#secReports">
            <i class="fa-solid fa-chart-pie me-2"></i>
            @Reports_Section
        </a>

        <div class="collapse submenu" id="secReports">
            <a class="nav-link ms-4 sidebar-item" href="@Url.Action("Report_Production", "Reports")">@Reports_Production</a>
        </div>

    </nav>

    <!-- SECTION DÉVELOPPEMENT FIXÉE EN BAS -->
    @await Html.PartialAsync("_DevInfo")

</aside>
